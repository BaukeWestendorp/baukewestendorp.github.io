var _=Object.defineProperty;var w=(i,t,e)=>t in i?_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var d=(i,t,e)=>(w(i,typeof t!="symbol"?t+"":t,e),e);import{S as v,i as b,s as D,k as l,q as z,a as S,l as u,m,r as C,h as o,c as R,n as q,b as p,C as g,B as f,o as A,M as x}from"../../../../chunks/index-514c8609.js";class E{constructor(t,e){d(this,"depth",0);d(this,"iteration",0);this.x=t,this.y=e}march(t,e,a){let s=a;for(const r of t){const n=r.sdf({x:this.x,y:this.y,z:this.depth});n<s&&(s=n)}if(this.depth+=s,!(s<=e)){if(this.depth>a||this.iteration>100){this.depth=-1;return}this.iteration++,this.march(t,e,a)}}}class I{constructor(t){this.position=t,this.position=t}}class y extends I{constructor(t,e){super(t),this.radius=e,this.radius=e}sdf(t){const e=t.x-this.position.x,a=t.y-this.position.y,s=t.z-this.position.z,r=e*e+a*a+s*s;return Math.sqrt(r)-this.radius}}class M{constructor(t){this.renderer=t,this.renderer=t}calculateFrame(){const t=[new y({x:200,y:170,z:150},100),new y({x:500,y:320,z:250},80)];for(let e=0;e<this.renderer.ctx.canvas.height;e++)for(let a=0;a<this.renderer.ctx.canvas.width;a++){const s=new E(a,e);s.march(t,1,1e3),this.renderer.setPixel(a,e,[0,s.depth,0,255])}}}class j{constructor(t){d(this,"imageData");this.ctx=t,this.ctx.imageSmoothingEnabled=!1,this.imageData=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}render(){this.ctx.putImageData(this.imageData,0,0)}setPixel(t,e,a){const s=(e*this.imageData.width+t)*4;this.imageData.data[s]=a[0],this.imageData.data[s+1]=a[1],this.imageData.data[s+2]=a[2],this.imageData.data[s+3]=a[3]}}function k(i){let t,e,a,s,r;return{c(){t=l("h2"),e=z("Ray-marching"),a=S(),s=l("div"),r=l("canvas"),this.h()},l(n){t=u(n,"H2",{});var c=m(t);e=C(c,"Ray-marching"),c.forEach(o),a=R(n),s=u(n,"DIV",{class:!0});var h=m(s);r=u(h,"CANVAS",{}),m(r).forEach(o),h.forEach(o),this.h()},h(){q(s,"class","wrapper svelte-dr9iz4")},m(n,c){p(n,t,c),g(t,e),p(n,a,c),p(n,s,c),g(s,r),i[2](r),i[3](s)},p:f,i:f,o:f,d(n){n&&o(t),n&&o(a),n&&o(s),i[2](null),i[3](null)}}}function F(i,t,e){let a,s,r;A(()=>{a.setAttribute("width",window.getComputedStyle(s).width),a.setAttribute("height",window.getComputedStyle(s).height);const h=a.getContext("2d");h&&(r=new j(h),new M(r).calculateFrame(),r.render())});function n(h){x[h?"unshift":"push"](()=>{a=h,e(0,a)})}function c(h){x[h?"unshift":"push"](()=>{s=h,e(1,s)})}return[a,s,n,c]}class H extends v{constructor(t){super(),b(this,t,F,k,D,{})}}export{H as default};
