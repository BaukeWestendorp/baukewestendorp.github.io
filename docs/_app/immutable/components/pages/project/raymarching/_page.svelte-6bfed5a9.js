var _=Object.defineProperty;var y=(i,t,e)=>t in i?_(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>(y(i,typeof t!="symbol"?t+"":t,e),e);import{S as v,i as w,s as D,k as l,q as b,a as C,l as u,m,r as S,h as d,c as R,n as q,b as p,C as g,B as f,o as A,M as x}from"../../../../chunks/index-514c8609.js";class E{constructor(t){o(this,"depth",0);o(this,"iteration",0);this.x=t}march(t,e,s){const a=t.sdf({x:this.x,y:this.depth});if(this.depth+=a,!(a<=e)){if(this.depth>s||this.iteration>100){this.depth=-1;return}this.iteration++,this.march(t,e,s)}}}class I{constructor(t){this.position=t,this.position=t}}class M extends I{constructor(t,e){super(t),this.radius=e,this.radius=e}sdf(t){const e=t.x-this.position.x,s=t.y-this.position.y,a=e*e+s*s;return Math.sqrt(a)-this.radius}}class k{constructor(t){this.renderer=t,this.renderer=t}calculateFrame(){const t=new M({x:200,y:150},100);for(let e=0;e<this.renderer.ctx.canvas.width;e++){const s=new E(e);s.march(t,.1,1e3);for(let a=0;a<this.renderer.ctx.canvas.height;a++)this.renderer.setPixel(e,a,[0,s.depth,0,255])}}}class F{constructor(t){o(this,"imageData");this.ctx=t,this.ctx.imageSmoothingEnabled=!1,this.imageData=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}render(){this.ctx.putImageData(this.imageData,0,0)}setPixel(t,e,s){const a=(e*this.imageData.width+t)*4;this.imageData.data[a]=s[0],this.imageData.data[a+1]=s[1],this.imageData.data[a+2]=s[2],this.imageData.data[a+3]=s[3]}}function P(i){let t,e,s,a,h;return{c(){t=l("h2"),e=b("Ray-marching"),s=C(),a=l("div"),h=l("canvas"),this.h()},l(n){t=u(n,"H2",{});var c=m(t);e=S(c,"Ray-marching"),c.forEach(d),s=R(n),a=u(n,"DIV",{class:!0});var r=m(a);h=u(r,"CANVAS",{}),m(h).forEach(d),r.forEach(d),this.h()},h(){q(a,"class","wrapper svelte-dr9iz4")},m(n,c){p(n,t,c),g(t,e),p(n,s,c),p(n,a,c),g(a,h),i[2](h),i[3](a)},p:f,i:f,o:f,d(n){n&&d(t),n&&d(s),n&&d(a),i[2](null),i[3](null)}}}function V(i,t,e){let s,a,h;A(()=>{s.setAttribute("width",window.getComputedStyle(a).width),s.setAttribute("height",window.getComputedStyle(a).height);const r=s.getContext("2d");r&&(h=new F(r),new k(h).calculateFrame(),h.render())});function n(r){x[r?"unshift":"push"](()=>{s=r,e(0,s)})}function c(r){x[r?"unshift":"push"](()=>{a=r,e(1,a)})}return[s,a,n,c]}class H extends v{constructor(t){super(),w(this,t,V,P,D,{})}}export{H as default};
