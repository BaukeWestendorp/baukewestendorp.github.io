var y=Object.defineProperty;var _=(i,t,e)=>t in i?y(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>(_(i,typeof t!="symbol"?t+"":t,e),e);import{S as v,i as w,s as D,k as l,q as b,a as S,l as u,m as p,r as z,h as d,c as C,n as R,b as m,C as g,B as f,o as q,M as x}from"../../../../chunks/index-514c8609.js";class A{constructor(t,e){o(this,"depth",0);o(this,"iteration",0);this.x=t,this.y=e}march(t,e,a){const s=t.sdf({x:this.x,y:this.y,z:this.depth});if(this.depth+=s,!(s<=e)){if(this.depth>a||this.iteration>100){this.depth=-1;return}this.iteration++,this.march(t,e,a)}}}class E{constructor(t){this.position=t,this.position=t}}class I extends E{constructor(t,e){super(t),this.radius=e,this.radius=e}sdf(t){const e=t.x-this.position.x,a=t.y-this.position.y,s=t.z-this.position.z,r=e*e+a*a+s*s;return Math.sqrt(r)-this.radius}}class M{constructor(t){this.renderer=t,this.renderer=t}calculateFrame(){const t=new I({x:200,y:170,z:150},100);for(let e=0;e<this.renderer.ctx.canvas.height;e++)for(let a=0;a<this.renderer.ctx.canvas.width;a++){const s=new A(a,e);s.march(t,1,1e3),this.renderer.setPixel(a,e,[0,s.depth,0,255])}}}class k{constructor(t){o(this,"imageData");this.ctx=t,this.ctx.imageSmoothingEnabled=!1,this.imageData=this.ctx.getImageData(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}render(){this.ctx.putImageData(this.imageData,0,0)}setPixel(t,e,a){const s=(e*this.imageData.width+t)*4;this.imageData.data[s]=a[0],this.imageData.data[s+1]=a[1],this.imageData.data[s+2]=a[2],this.imageData.data[s+3]=a[3]}}function F(i){let t,e,a,s,r;return{c(){t=l("h2"),e=b("Ray-marching"),a=S(),s=l("div"),r=l("canvas"),this.h()},l(n){t=u(n,"H2",{});var c=p(t);e=z(c,"Ray-marching"),c.forEach(d),a=C(n),s=u(n,"DIV",{class:!0});var h=p(s);r=u(h,"CANVAS",{}),p(r).forEach(d),h.forEach(d),this.h()},h(){R(s,"class","wrapper svelte-dr9iz4")},m(n,c){m(n,t,c),g(t,e),m(n,a,c),m(n,s,c),g(s,r),i[2](r),i[3](s)},p:f,i:f,o:f,d(n){n&&d(t),n&&d(a),n&&d(s),i[2](null),i[3](null)}}}function V(i,t,e){let a,s,r;q(()=>{a.setAttribute("width",window.getComputedStyle(s).width),a.setAttribute("height",window.getComputedStyle(s).height);const h=a.getContext("2d");h&&(r=new k(h),new M(r).calculateFrame(),r.render())});function n(h){x[h?"unshift":"push"](()=>{a=h,e(0,a)})}function c(h){x[h?"unshift":"push"](()=>{s=h,e(1,s)})}return[a,s,n,c]}class N extends v{constructor(t){super(),w(this,t,V,F,D,{})}}export{N as default};
